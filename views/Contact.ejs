<!DOCTYPE html>
<html>
    <%- include('includes/head.ejs') %>
    <%- include('includes/nav.ejs') %>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-10">
                <p><b>Welcome <%=name%>!</b></p>
            </div>
            <%- include('includes/logoutButton.ejs') %>
        </div>
        <div class="whiteBox row">
            <%- include('includes/searchbar.ejs') %>
            <%
            if(role == 'Admin') {
            %>
            <a class="purpleButton" href="/approve">Approve</a>
            <%
            }
            %>
        </div>
        <%
        if(userData.length != 0) {
        %>
        <div class="row">
            <div class="col">
                <table class="table2 whiteBox" id="contactList" border="1">
                    <tr>
                        <th>No.</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                        <th>Area</th>
                        <th>Role</th>
                        <%
                        if(role == 'Admin'){
                        %>
                        <th>Delete</th>
                        <th>Edit</th>
                        <%
                        }
                        %>
                    </tr>
                    <%
                        if(userData.length != 0){
                            var i = 1;
                            userData.forEach(function(data){
                                if(data.role != 'not approved'){
                        %>
                        <tr id="<%=data.name%>" class="<%=data.area%>">
                            <td><%=i%></td>
                            <td><%=data.name%></td>
                            <td><%=data.email%></td>
                            <td><%=data.phone%></td>
                            <td><%=data.area%></td>
                            <td><%=data.role%></td>
                            <%
                            if(role == 'Admin'){
                            %>
                            <td >
                                <a class="red" href="/contact/delete/<%=data.email%>/<%=data.username%>">Delete</a>
                            </td>
                            <td><a class="red" href="/contact/edit/<%=data.email%>">Edit</a></td>
                            <%
                            }
                            %>
                        </tr>
                        
                        <%
                            i++;
                            }
                            });
                        }
                        %>
                </table>
            </div>
        </div>
        <%
        } else {
        %>
        <h2>NOT FOUND</h2>
        <%
        }
        %>
    </div>
</body>

</html>