<!DOCTYPE html>
<html>
<%- include('includes/head.ejs') %>
    <%- include('includes/nav.ejs') %>
        <%- include('includes/back-to-top.ejs')%>
            <%- include('includes/preloader.ejs')%>

                <body>
                    <div class="container-fluid main">
                        <div>
                            <div class="whiteBox formCon">
                                <h3 class="formTitle">Reset Password</h3>
                            </div>
                            <div class=" whiteBox formCon">
                                <form class="registerForm" action="/resetpass/reset" method="POST"
                                    class="resetPassForm">
                                    <%- include('includes/errorNotice.ejs') %>
                                        <div class="form">
                                            <td><input type="text" id="username" name="username" placeholder="Username"
                                                    required></td>
                                            <td><input type="text" id="phone" name="phone" pattern="[0-9]{10}"
                                                    placeholder="Phone"
                                                    title="Phone number with 7-9 and remaing 9 digit with 0-9" required>
                                            </td>
                                            <td><input type="password" id="newPass1" name="pass1"
                                                    placeholder=" New password"
                                                    pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                                    title="Must contain at least one  number and one uppercase and lowercase letter, and at least 8 or more characters"
                                                    required></td>
                                            <td><input type="password" id="newPass2" placeholder="Retype new password"
                                                    pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                                    title="Must contain at least one  number and one uppercase and lowercase letter, and at least 8 or more characters"
                                                    required></td>

                                        </div>
                                        <div class="homebuttons">
                                            <button type="submit" class="submitButton purpleButton width60">Reset
                                                Password</button>
                                            <button type="reset"
                                                class="submitButton purpleButton width20">Clear</button>
                                        </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </body>
                <script>
                    setInterval(addMember, 100);

                    document.querySelector("button[type=submit]").disabled = true;

                    function addMember() {
                        var getUsername = document.getElementById('username').value;
                        var getPhone = document.getElementById('phone').value;
                        // var getOTP = document.getElementById('otp').value;
                        var getPass1 = document.getElementById('newPass1').value;
                        var getPass2 = document.getElementById('newPass2').value;

                        var errorMessagePass = document.getElementById('errorMessPassword');
                        var errorMessageWrapperPass = document.getElementById('errorMess-wrapper-pass');

                        errorMessageWrapperPass.style.display = 'none';
                        if (getUsername == "" || getPhone == "" || getPass1 == "" || getPass2 == "") {
                            document.querySelector("button[type=submit]").disabled = true;
                            errorMessageWrapperPass.style.display = 'block';
                            errorMessagePass.innerHTML = "Please fill out the blank(s)";
                        } else if (getPass1 != getPass2) {
                            document.querySelector("button[type=submit]").disabled = true;
                            errorMessageWrapperPass.style.display = 'block';
                            errorMessagePass.innerHTML = "Passwords don't match!";
                        } else {
                            document.querySelector("button[type=submit]").disabled = false;
                            errorMessageWrapperPass.style.display = 'none';
                        }
                    }
                </script>

</html>